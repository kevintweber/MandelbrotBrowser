!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.RGB=0]="RGB",e[e.Greyscale=1]="Greyscale"}(t.ColorSchemeType||(t.ColorSchemeType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LineByLine=0]="LineByLine",e[e.Blockwise=1]="Blockwise"}(t.AlgorithmType||(t.AlgorithmType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(18),i=n(0),a=n(19),c=document.getElementById("mandelbrot");c.height=window.innerHeight,c.width=window.innerWidth;var u=document.getElementById("selection");u.height=window.innerHeight,u.width=window.innerWidth;var l=new a.ParameterHandler;l.parseQueryParameters(window.location.search);var s=r.default(i.ColorSchemeType.RGB,c,l);o.registerSelectionBoxHandlers(u,s),o.registerAlgorithmSelect(),s.generate()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(8),i=n(12),a=n(13),c=n(14),u=n(17);t.default=function(e,t,n){var l=i.default(n.width);console.log("Max iterations: ",l);var s=r.default(e,l);console.log("Color scheme: ",s);var h=new a.Coordinates(t.height,t.width,n.centerX,n.centerY,n.width);console.log("Coordinates: ",h);var d=new u.Mandelbrot(l);console.log("Engine: ",d);var f=o.default(n.algorithm,s,h,t.getContext("2d"),d);return console.log("Algorithm: ",f),new c.Image(f,h,d,l)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(5),i=n(7);t.default=function(e,t){switch(e){case r.ColorSchemeType.RGB:return new o.Hsl(t,300,150,1,.5);case r.ColorSchemeType.Greyscale:return new i.Greyscale(t,100,50)}throw new Error("Invalid color scheme type: "+e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(){function e(e,t,n,r,o){this.maxIterations=e,this.cycleLength=t,this.hueOffset=n,this.saturation=r,this.luminosity=o}return e.prototype.getColor=function(e){if(e>=this.maxIterations)return[0,0,0,255];var t=r.default((e+this.hueOffset)%this.cycleLength/this.cycleLength,this.saturation,this.luminosity);return t.push(255),t},e}();t.Hsl=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,o,i;if(0==t)return[Math.round(255*n),Math.round(255*n),Math.round(255*n)];var a=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},c=n<.5?n*(1+t):n+t-n*t,u=2*n-c;return r=a(u,c,e+1/3),o=a(u,c,e),i=a(u,c,e-1/3),[Math.round(255*r),Math.round(255*o),Math.round(255*i)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.maxIterations=e,this.cycleLength=t,this.offset=n}return e.prototype.getColor=function(e){if(e>=this.maxIterations)return[0,0,0,255];var t=Math.abs((e+this.offset)%(2*this.cycleLength)/this.cycleLength-1),n=Math.floor(200*t)+35;return[n,n,n,255]},e}();t.Greyscale=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(9),i=n(10),a=n(11);t.default=function(e,t,n,c,u){var l;switch(e){case r.AlgorithmType.LineByLine:l=new o.LineByLine(t,n,c,u);break;case r.AlgorithmType.Blockwise:l=new a.Blockwise(t,n,c,u);break;default:throw new Error("Invalid algorithm type: "+e)}return new i.TimedAlgorithm(l)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n,r){this.colorScheme=e,this.coordinates=t,this.context=n,this.engine=r}return e.prototype.draw=function(e,t,n){return r(this,void 0,void 0,(function(){var r,i,a=this;return o(this,(function(o){switch(o.label){case 0:r=this.context.createImageData(this.coordinates.pixelWidth,1),i=(new Date).getTime(),o.label=1;case 1:return t<this.coordinates.pixelHeight?(this.drawLine(r,t),this.context.putImageData(r,0,t),(new Date).getTime()-i>1e3?(console.log("Updating image."),i=(new Date).getTime(),[4,setTimeout((function(){a.draw(e,t,n)}),0)]):[3,3]):[3,4];case 2:return o.sent(),[2];case 3:return t++,[3,1];case 4:return[2,n()]}}))}))},e.prototype.drawLine=function(e,t){for(var n=0,r=0;r<this.coordinates.pixelWidth;r++){var o=this.coordinates.getXCoordinate(r),i=this.coordinates.getYCoordinate(t),a=this.engine.calculateEscapeDepth(o,i),c=this.colorScheme.getColor(a);e.data[n++]=c[0],e.data[n++]=c[1],e.data[n++]=c[2],e.data[n++]=c[3]}},e}();t.LineByLine=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.algorithm=e,this.milliseconds=0}return e.prototype.draw=function(e,t,n){return r(this,void 0,void 0,(function(){var r,i,a=this;return o(this,(function(o){switch(o.label){case 0:return r=(new Date).getTime(),i=function(){var e=(new Date).getTime();a.milliseconds=e-r,n()},[4,this.algorithm.draw(e,t,i)];case 1:return o.sent(),[2]}}))}))},e}();t.TimedAlgorithm=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){this.colorScheme=e,this.coordinates=t,this.context=n,this.engine=r,this.blockSize=10}return e.prototype.draw=function(e,t,n){var r=this,o=(new Date).getTime(),i=this.coordinates.pixelWidth,a=this.coordinates.pixelHeight,c=function(){var n=e,u=e+r.blockSize>i?i-e:e+r.blockSize,l=t,s=t+r.blockSize>a?a-t:t+r.blockSize,h=r.context.createImageData(u-n,s-l);(r.drawBlock(h,r.colorScheme,r.coordinates,r.engine,n,u,l,s),r.context.putImageData(h,n,l),(e+=r.blockSize)>i&&(e=0,(t+=r.blockSize)>a))||((new Date).getTime()-o>1e3?(o=(new Date).getTime(),setTimeout(c,0)):c())};c()},e.prototype.drawBlock=function(e,t,n,r,o,i,a,c){for(var u=0,l=a;l<c;l++)for(var s=o;s<i;s++){var h=n.getXCoordinate(s),d=n.getYCoordinate(l),f=r.calculateEscapeDepth(h,d),p=t.getColor(f);e.data[u++]=p[0],e.data[u++]=p[1],e.data[u++]=p[2],e.data[u++]=p[3]}},e}();t.Blockwise=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Math.log10(e),n=t*t*100+80;return Math.floor(Math.max(n,100))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r,o){this.pixelHeight=e,this.pixelWidth=t,this.centerX=n,this.centerY=r,this.width=o,this.increment=o/t}return e.prototype.getXCoordinate=function(e){return this.centerX-this.width/2+e*this.increment},e.prototype.getYCoordinate=function(e){return this.centerY+this.pixelHeight*this.increment/2-e*this.increment},e}();t.Coordinates=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),a=function(){function e(e,t,n,r){this.algorithm=e,this.coordinates=t,this.engine=n,this.maxIterations=r}return e.prototype.calculateEscapeDepth=function(e,t){return this.engine.calculateEscapeDepth(this.coordinates.getXCoordinate(e),this.coordinates.getYCoordinate(t))},e.prototype.generate=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return i.preDrawUpdate(this),[4,this.algorithm.draw(0,0,(function(){i.updateRenderStatistics(e)}))];case 1:return t.sent(),[2]}}))}))},e.prototype.getRenderingTime=function(){return this.algorithm.milliseconds},e}();t.Image=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16);t.preDrawUpdate=function(e){console.log("Pre-draw update"),document.getElementById("max-iterations").textContent=e.maxIterations.toString(),document.getElementById("reset").onclick=function(){window.location.search=""};var t=document.getElementById("enlarge");t.onclick=function(){window.location.search="algorithm="+t.getAttribute("data-algorithm")+"&center="+parseFloat(t.getAttribute("data-xcenter"))+","+parseFloat(t.getAttribute("data-ycenter"))+"&width="+parseFloat(t.getAttribute("data-width"))};var n,r=document.getElementById("magnification"),o=5/e.coordinates.width;n=o<1e6?Math.floor(o):o.toExponential(3),r.textContent=n},t.updateRenderStatistics=function(e){console.log("Updating render statistics"),document.getElementById("rendering-time").textContent=(e.getRenderingTime()/1e3).toPrecision(2)+" sec.",document.getElementById("pixels-per-second").textContent=r.default(1e3*e.coordinates.pixelWidth*e.coordinates.pixelHeight/e.getRenderingTime())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Math.abs(e);if(t<1e3)return e.toString();var n=e<0?"-":"",r=Math.floor(Math.log10(t)/3);return n+(t/Math.pow(1e3,r)).toFixed(3)+" "+["","K","M","B","T"][r]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){if(this.maxIterations=e,this.maxIterations<1)throw new Error("Invalid number of max iterations: "+this.maxIterations)}return e.prototype.calculateEscapeDepth=function(e,t){for(var n=0,r=0,o=0,i=0,a=0;a<this.maxIterations&&r+i<=4;){var c=2*n*o+t;r=(n=n*n-o*o+e)*n,i=(o=c)*o,a++}return a},e}();t.Mandelbrot=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerSelectionBoxHandlers=function(e,t){var n=e.getContext("2d"),r=null;e.onmousedown=function(e){null===r&&(console.log("Starting selection box at:",e.clientX,e.clientY),r=[e.clientX,e.clientY,null,null])};var o=document.getElementById("coordinates"),i=document.getElementById("depth");e.onmousemove=function(e){null!==r&&(n.clearRect(0,0,window.innerWidth,window.innerHeight),n.lineWidth=1,n.strokeStyle="#F8F8F8",r[2]=e.clientX,r[3]=e.clientY,n.strokeRect(r[0],r[1],r[2]-r[0],r[3]-r[1]));var a=Math.max(6,Math.floor(3+Math.log10(5/t.coordinates.width)));o.textContent=t.coordinates.getXCoordinate(e.clientX).toFixed(a)+" + "+t.coordinates.getYCoordinate(e.clientY).toFixed(a)+"i",i.textContent=t.calculateEscapeDepth(e.clientX,e.clientY).toString()};var a=document.getElementById("enlarge");e.onmouseup=function(e){console.log("Stopping selection box at:",e.clientX,e.clientY);var n=t.coordinates.getXCoordinate(Math.min(r[0],r[2])),o=t.coordinates.getYCoordinate(Math.min(r[1],r[3])),i=t.coordinates.getXCoordinate(Math.max(r[0],r[2])),c=t.coordinates.getYCoordinate(Math.max(r[1],r[3]));a.setAttribute("data-width",(i-n).toString()),a.setAttribute("data-xcenter",((n+i)/2).toString()),a.setAttribute("data-ycenter",((o+c)/2).toString()),r=null}},t.registerAlgorithmSelect=function(){var e=document.getElementById("enlarge"),t=document.getElementById("algorithm");t.onselect=function(n){e.setAttribute("data-algorithm",t.getAttribute("value"))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(){this.algorithm=r.AlgorithmType.LineByLine,this.centerX=-.5,this.centerY=0,this.width=5}return e.prototype.parseQueryParameters=function(e){var t=e.replace("?","").split("&");console.log("Query parameters",t);for(var n=0;n<t.length;n++){var o=t[n].split("="),i=o[1];switch(o[0]){case"algorithm":this.algorithm=r.AlgorithmType[i];break;case"center":var a=i.split(",");this.centerX=parseFloat(a[0]),this.centerY=parseFloat(a[1]);break;case"width":this.width=parseFloat(i)}}},e}();t.ParameterHandler=o}]);